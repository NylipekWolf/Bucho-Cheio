<app-page-template-main
  title="Store Providence - RI"
  [breadcrumb]="breadcrumb"
  [breadcrumbHome]="breadcrumbHome"
>
  <div pos-right class="btn-position">
    <app-settings-user-filter
      (filterOutput)="search($event)"
    ></app-settings-user-filter>
    <p-button
      label="New user"
      [outlined]="true"
      severity="secondary"
      icon="pi pi-plus-circle"
      (onClick)="prepareNewUser()"
    />
  </div>
  <div body>
    <app-page-template-card
      title="Users"
      subtitle="List of already registered users"
      primeIcon="pi pi-list"
    >
      @if (userSelected) {
      <div pos-right class="btn-position">
        <app-activate-template
          [activated]="userSelected.activated"
          (onProceed)="activateDeactivate()"
        ></app-activate-template>
        <p-button
          label="Edit"
          [outlined]="true"
          severity="secondary"
          icon="pi pi-pencil"
          (onClick)="prepareEditUser()"
        />
      </div>
      }

      <div body>
        <app-table-template
          [items]="users"
          [cols]="usersCols"
          (lineClicked)="userSelected = $event"
          [loading]="loading"
          (loadMoreClicked)="loadMore()"
        ></app-table-template>
      </div>
    </app-page-template-card>
  </div>
</app-page-template-main>

@if(openForm) {
<app-settings-user-form
  [openForm]="openForm"
  (closeForm)="closeForm($event)"
  [breadcrumb]="breadcrumb"
  [breadcrumbHome]="breadcrumbHome"
  [userSelected]="userSelected"
  [editUser]="editUser"
></app-settings-user-form>
}
